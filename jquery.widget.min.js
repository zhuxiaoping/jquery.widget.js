/*
 * jquery.widget.js https://github.com/zhuxiaoping/jquery.widget.js
 * by zhuxiaoping 
 * 2014-10-27 v1.3
*/
(function(A,B){B.Widget=function(C,D){this.element=B(D);this.status="closed";this.defaults={container:A.document.body,speed:300,distance:A.document.body.clientWidth,clickClose:false,widgetBodyClass:".widget-body",onClose:undefined,onShow:undefined,direction:"left",left:undefined,touch:false,};this._init(C)};B.Widget.prototype={_init:function(E){var D=this;var C=D.options=B.extend({},D.defaults,E||{});if(!C.container){return alert("container not be null"),!1}if(C.direction=="left"||C.direction=="right"){C.container.style.overflowX="hidden";C.container.style.overflowY="auto";D.distance=typeof C.distance=="undefined"?C.container.clientWidth:C.distance;var F=D.nowX=D.initX=typeof C.left=="undefined"?(C.direction=="left"?D.distance:-D.distance):C.left;var G=D.element[0].style;G.webkitTransform="translate("+F+"px,0)translateZ(0)";G.msTransform=G.MozTransform=G.OTransform="translateX("+F+"px)";if(C.touch){D.element[0].addEventListener("touchstart",D._handleTouchEvent,false);D.element[0].addEventListener("touchend",D._handleTouchEvent,false);D.element[0].addEventListener("touchmove",D._handleTouchEvent,false)}}else{alert("direction is not left or right")}},_translate:function(C,D,F){this.nowX=F;var E=C[0].style;E.webkitTransitionDuration=E.MozTransitionDuration=E.msTransitionDuration=E.OTransitionDuration=E.transitionDuration=D+"ms";E.webkitTransform="translate("+F+"px,0)translateZ(0)";E.msTransform=E.MozTransform=E.OTransform="translateX("+F+"px)"},open:function(){var E=this;var C=E.element;var D=E.options;C.show();var F=D.direction=="left"?E.initX-E.distance:E.initX+E.distance;E._translate(C,D.speed,F);if(D.onShow){D.onShow.call(C[0])}E.status="opened";if(!D.clickClose){return}C.unbind("click").bind("click",function(){E.close()});if(D.widgetBodyClass){C.find(D.widgetBodyClass).unbind("click").click(function(G){G.stopPropagation()})}},close:function(){var E=this;E.status="closed";var C=E.element;var D=E.options;E._translate(C,D.speed,E.initX);if(D.onClose){D.onClose.call(C[0])}},_moveto:function(C){C=C>this.distance?this.distance:(C<this.initX?this.initX:C);this._translate(this.element,100,C)},isShow:function(){return this.status=="opened"},_handleTouchEvent:function(D){var C=B(this).data("widget");if(D.touches.length==1){switch(D.type){case"touchstart":C.touchStartX=D.touches[0].pageX;C.touchNowX=C.nowX;break;case"touchend":break;case"touchmove":D.preventDefault();var E=D.touches[0].pageX-C.touchStartX;C._moveto(C.touchNowX+E);break}}}};B.fn.widget=function(D){var E=typeof D;switch(E){case"string":if(this.length>1){return}var F=Array.prototype.slice.call(arguments,1);var C=B.data(this[0],"widget");if(!C){return false}if(!B.isFunction(C[D])||D.charAt(0)==="_"){return false}return C[D].apply(C,F);break;case"object":this.each(function(){var G=B.data(this,"widget");if(G){G.update(D)}else{G=new B.Widget(D,this);if(!G.failed){B.data(this,"widget",G)}}});return this;break}}})(window,jQuery);